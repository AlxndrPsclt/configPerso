#!/bin/sh

# Check if a file name is provided
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <filename>"
    exit 1
fi

FILE=$1

# Check if file exists
if [ ! -f "$FILE" ]; then
    echo "File not found: $FILE"
    exit 1
fi

# Create backup directory if it doesn't exist
BACKUP_DIR="/tmp/backups"
mkdir -p "$BACKUP_DIR"

# Backup the file
cp "$FILE" "$BACKUP_DIR"

# Encrypt the file
gpg --encrypt --recipient etrnl@etrnl.etrnl "$FILE"

# Check if encryption was successful
if [ $? -eq 0 ]; then
    # Remove the original file if encryption was successful
    rm "$FILE"
else
    echo "Encryption failed for $FILE"
    exit 1
fi
